"use strict";(self.webpackChunkFronted=self.webpackChunkFronted||[]).push([[683],{3683:(F,f,c)=>{c.r(f),c.d(f,{WebConfigModule:()=>U});var g=c(9808),p=c(1083),l=c(3075),v=c(2340),h=c(5226),u=c.n(h),e=c(5e3),b=c(6196);function C(o,s){1&o&&(e.TgZ(0,"span",19),e._uU(1,"El campo no es valido "),e.qZA())}function y(o,s){1&o&&(e.TgZ(0,"span",19),e._uU(1,"El campo no es valido "),e.qZA())}const Z=function(o){return{disabled:o}},w=[{path:"",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-web-config"]],decls:1,vars:0,template:function(n,t){1&n&&e._UZ(0,"router-outlet")},directives:[p.lC],styles:[""]}),o})(),children:[{path:"edit",component:(()=>{class o{constructor(n,t,i){this.companyService=n,this.fb=t,this.router=i,this.web={},this.faviconURL="",this.logoURL="",this.buttons=[{text:"Editar Encabezado",name:"header"},{text:"Editar Pie de pagina",name:"footer"},{text:"Editar CSS",name:"css"},{text:"Editar JS",name:"js"}],this.myForm=this.fb.group({title:["",[l.kI.required]],description:["",[l.kI.required]],keywords:["",[l.kI.required]]}),this.companyService.getWeb(this.companyService.getCurrentIDCompany).subscribe(r=>{var m,a;r.ok&&(this.web=r.web,this.faviconURL=`${v.N.baseUrl}/uploads/web/${this.web.favicon}`,this.logoURL=`${v.N.baseUrl}/uploads/web/${this.web.logo}`,this.myForm.setValue({title:this.web.title,description:null!==(m=this.web.description)&&void 0!==m?m:"",keywords:null!==(a=this.web.keywords)&&void 0!==a?a:""}))})}ngOnInit(){}changeFavicon(n){var t;if(this.favicon=null===(t=null==n?void 0:n.target)||void 0===t?void 0:t.files[0],!this.favicon)return;if(!["image/png","image/jpeg","image/jpg"].includes(this.favicon.type))return void u().fire({background:"rgba(250,250,250,0.96)",title:"Oops!! hubo un error",text:"Tipo de archivo no valido",icon:"error",confirmButtonColor:"#3085d6"});const r=new FileReader;r.readAsDataURL(this.favicon),r.onload=m=>{var a,d;this.faviconURL=null===(d=null===(a=m.target)||void 0===a?void 0:a.result)||void 0===d?void 0:d.toString()}}changeLogo(n){var t;if(this.logo=null===(t=null==n?void 0:n.target)||void 0===t?void 0:t.files[0],!this.logo)return;if(!["image/png","image/jpeg","image/jpg"].includes(this.logo.type))return void u().fire({background:"rgba(250,250,250,0.96)",title:"Oops!! hubo un error",text:"Tipo de archivo no valido",icon:"error",confirmButtonColor:"#3085d6"});const r=new FileReader;r.readAsDataURL(this.logo),r.onload=m=>{var a,d;this.logoURL=null===(d=null===(a=m.target)||void 0===a?void 0:a.result)||void 0===d?void 0:d.toString()}}fieldNotValid(n){var t,i;return(null===(t=this.myForm.get(n))||void 0===t?void 0:t.invalid)&&(null===(i=this.myForm.get(n))||void 0===i?void 0:i.touched)}save(){if(this.myForm.valid){const{title:n,description:t,keywords:i}=this.myForm.value;this.companyService.updateWeb(this.companyService.getCurrentIDCompany,{title:n,description:t,keywords:i,logo:this.logo,favicon:this.favicon}).subscribe(d=>{d.ok?u().fire({position:"center",icon:"success",title:"Cambios Exitosos, redireccionando a Home",showConfirmButton:!0}).then(()=>{this.router.navigateByUrl(`admin-companies/${localStorage.getItem("_web")}`)}):(u().fire({background:"rgba(250,250,250,0.96)",title:"Oops!! hubo un error",text:`${d.msg}`,icon:"error",confirmButtonColor:"#3085d6"}),console.log(d.error))})}else console.log(this.myForm.valid),console.log(this.myForm.value),u().fire({background:"rgba(250,250,250,0.96)",title:"Oops!! hubo un error",text:"Datos mal ingresados",icon:"error",confirmButtonColor:"#3085d6"})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(b.J),e.Y36(l.qu),e.Y36(p.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-web"]],decls:37,vars:11,consts:[[1,"m-5"],[1,"text-center"],["autocomplete","off",1,"form-edit","mx-auto","text-center","py-5","bg-body","rounder",3,"formGroup","ngSubmit"],[1,"row","w-50","mx-auto","mb-4"],[1,"mb-3","col-md-12"],[1,"form-label"],["type","text","formControlName","title","id","title","aria-describedby","helpId","placeholder","",1,"form-control",3,"value"],["class","form-label form-text text-danger",4,"ngIf"],["type","text","formControlName","description","id","description","placeholder","",1,"form-control","text-center",3,"value"],["type","text","formControlName","keywords","id","price","placeholder","",1,"form-control",3,"value"],[1,"row","pt-3","justify-content-center","mx-auto"],[1,"col-3"],["name","favicon","id","favicon",2,"height","80px","max-width","80px",3,"src"],[1,"mt-3","col-md-12"],["accept","image/*","type","file","id","formFavicon",1,"form-control",3,"change"],[1,"mb-3","col-md-12","mt-2"],["name","logo","id","logo",2,"height","80px","max-width","120px",3,"src"],["accept","image/png, image/jpeg, image/jpg","type","file","id","formLogo",1,"form-control",3,"change"],["type","submit",1,"btn","btn-purple",3,"ngClass"],[1,"form-label","form-text","text-danger"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2," Editar Web"),e.qZA(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return t.save()}),e.TgZ(4,"div",3)(5,"div",4)(6,"span",5),e._uU(7,"Titulo "),e.qZA(),e._UZ(8,"input",6),e.YNc(9,C,2,0,"span",7),e.qZA(),e.TgZ(10,"div",4)(11,"span",5),e._uU(12,"Descripci\xf3n "),e.qZA(),e._UZ(13,"textarea",8),e.YNc(14,y,2,0,"span",7),e.qZA(),e.TgZ(15,"div",4)(16,"span",5),e._uU(17,"Palabras Clave "),e.qZA(),e._UZ(18,"input",9),e.qZA(),e.TgZ(19,"div",4)(20,"span",5),e._uU(21,"Favicon "),e.qZA(),e.TgZ(22,"div",10)(23,"div",11),e._UZ(24,"img",12),e.qZA(),e.TgZ(25,"div",13)(26,"input",14),e.NdJ("change",function(r){return t.changeFavicon(r)}),e.qZA()()()(),e.TgZ(27,"div",15)(28,"span",5),e._uU(29,"Logo "),e.qZA(),e.TgZ(30,"div",10)(31,"div",11),e._UZ(32,"img",16),e.qZA(),e.TgZ(33,"div",13)(34,"input",17),e.NdJ("change",function(r){return t.changeLogo(r)}),e.qZA()()()()(),e.TgZ(35,"button",18),e._uU(36,"Guardar Cambios"),e.qZA()()()),2&n&&(e.xp6(3),e.Q6J("formGroup",t.myForm),e.xp6(5),e.Q6J("value",t.web.title),e.xp6(1),e.Q6J("ngIf",t.fieldNotValid("title")),e.xp6(4),e.Q6J("value",t.web.description),e.xp6(1),e.Q6J("ngIf",t.fieldNotValid("description")),e.xp6(4),e.Q6J("value",t.web.keywords),e.xp6(6),e.Q6J("src",t.faviconURL,e.LSH),e.xp6(8),e.Q6J("src",t.logoURL,e.LSH),e.xp6(3),e.Q6J("ngClass",e.VKq(9,Z,t.myForm.invalid)))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,g.O5,g.mk],styles:[".form-edit[_ngcontent-%COMP%]{width:700px}.form-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-edit[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-align:center}.btn-fa[_ngcontent-%COMP%]{display:contents;border:0px;width:100px;height:10px;font-size:5rem}"]}),o})(),pathMatch:"full"},{path:"",redirectTo:"edit",pathMatch:"full"}]}];let x=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.Bz.forChild(w)],p.Bz]}),o})(),U=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.ez,x,l.UX]]}),o})()}}]);