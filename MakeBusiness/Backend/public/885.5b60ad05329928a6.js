"use strict";(self.webpackChunkFronted=self.webpackChunkFronted||[]).push([[885],{3885:(I,y,a)=>{a.r(y),a.d(y,{CompaniesModule:()=>B});var p=a(9808),h=a(1083),m=a(837),t=a(5e3),v=a(6196),g=a(2638),$=a(4594),n=a(7423),e=a(5245),i=a(1824);function s(o,c){if(1&o&&(t.TgZ(0,"button",14),t._UZ(1,"i",15),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&o){const r=c.$implicit;t.Q6J("routerLink",r.path),t.xp6(1),t.Tol(r.icon+" text-deg-purple-1 me-3"),t.xp6(2),t.Oqu(r.text)}}const M=function(){return["/landing-page"]};let P=(()=>{class o{constructor(r,l){this.companyService=r,this.activatedRoute=l,this.optionButtons=[{text:"Mi Empresa",path:"company",icon:"fa fa-solid fa-building ps-2"},{text:"Administrar Archivos",path:"files",icon:"fa fa-solid fa-file ps-2"},{text:"Productos",path:"products",icon:"fa fa-solid fa-users"},{text:"Administrar P\xe1ginas",path:"pages",icon:"fa fa-solid fa-money-bill-transfer"},{text:"Config. del Sitio",path:"web-config",icon:"fa fa-solid fa-pen-to-square"}],this.favIcon=document.querySelector("#favIcon"),this.favIcon.href="favicon.ico",this.activatedRoute.params.subscribe(d=>{let f=d.id;this.companyService.setCurrentIDCompany=f,this.companyService.inicializatedCurrentData(f),this.companyService.getWeb(this.companyService.getCurrentIDCompany).subscribe(C=>{C.ok||this.companyService.updateWeb(f,{title:this.companyService.getCompany.nameCompany}).subscribe(x=>{x.ok||console.log("no existe la web")})})})}ngOnInit(){}ngAfterContentInit(){}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(v.J),t.Y36(h.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-home"]],decls:20,vars:4,consts:[[1,"contenerdor","h-100",3,"hasBackdrop"],["mode","side",1,"sidenav","h-100","bg-purple"],["sideNav",""],[1,"d-flex","flex-column","h-100","justify-content-between","overflow-hidden"],[1,"justify-content-between","bg-purple-deg-1","p-0","sidenav__header"],["src","../../../assets/Logo V3.png",1,"sidenav__logo","ms-3","cursor-pointer",3,"routerLink"],["mat-icon-button","",1,"text-white",3,"click"],[1,"sidenav__options","bg-body","py-5","d-flex","flex-column","container"],["class","btn ts-4  text-start",3,"routerLink",4,"ngFor","ngForOf"],[1,"justify-content-between","bg-purple","p-0","sidenav__footer"],[1,"bg-purple","justify-content-between"],["mat-icon-button","",3,"click"],[1,"text-white"],["mat-icon-button",""],[1,"btn","ts-4","text-start",3,"routerLink"],["aria-hidden","true",2,"width","40px","height","100%"]],template:function(r,l){if(1&r){const d=t.EpF();t.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2)(3,"div",3)(4,"mat-toolbar",4),t._UZ(5,"img",5),t.TgZ(6,"button",6),t.NdJ("click",function(){return t.CHM(d),t.MAs(2).toggle()}),t.TgZ(7,"mat-icon"),t._uU(8,"menu"),t.qZA()()(),t.TgZ(9,"div",7),t.YNc(10,s,4,4,"button",8),t.qZA(),t._UZ(11,"mat-toolbar",9),t.qZA()(),t.TgZ(12,"mat-sidenav-content")(13,"mat-toolbar",10)(14,"button",11),t.NdJ("click",function(){return t.CHM(d),t.MAs(2).toggle()}),t.TgZ(15,"mat-icon",12),t._uU(16,"menu"),t.qZA()(),t._UZ(17,"app-avatar",13),t.qZA(),t.TgZ(18,"div"),t._UZ(19,"router-outlet"),t.qZA()()()}2&r&&(t.Q6J("hasBackdrop",!0),t.xp6(5),t.Q6J("routerLink",t.DdM(3,M)),t.xp6(5),t.Q6J("ngForOf",l.optionButtons))},directives:[g.TM,g.JX,$.Ye,h.rH,n.lW,e.Hw,p.sg,g.Rh,i.A,h.lC],styles:[".sidenav[_ngcontent-%COMP%]{width:350px;border:0px;overflow:hidden}.sidenav[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{width:100%}.sidenav__logo[_ngcontent-%COMP%]{height:70px}.sidenav__header[_ngcontent-%COMP%]{top:0}.sidenav__footer[_ngcontent-%COMP%]{bottom:0;height:70px;border-top:.5px solid #d38bc2}.sidenav__options[_ngcontent-%COMP%]{width:300px;height:400px;border-radius:10px}.sidenav__options[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{font-size:30px}.sidenav__options[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:20px;margin-bottom:3px;color:#ff2fac}.sidenav__options[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{border:solid 1px #f871af}"]}),o})();var u=a(3075),Z=a(5226),b=a.n(Z);function S(o,c){1&o&&(t.TgZ(0,"span",13),t._uU(1,"El campo no es valido "),t.qZA())}function T(o,c){1&o&&(t.TgZ(0,"span",13),t._uU(1,"El campo no es valido "),t.qZA())}function F(o,c){1&o&&(t.TgZ(0,"span",13),t._uU(1,"El campo no es valido "),t.qZA())}function k(o,c){if(1&o&&(t.TgZ(0,"div",4)(1,"h1"),t._uU(2,"Informacion de su empresa"),t.qZA(),t.TgZ(3,"div",5)(4,"span",6),t._uU(5,"Nombre de la compania "),t.qZA(),t._UZ(6,"input",7),t.YNc(7,S,2,0,"span",8),t.qZA(),t.TgZ(8,"div",5)(9,"span",6),t._uU(10,"Descripci\xf3n "),t.qZA(),t._UZ(11,"textarea",9),t.YNc(12,T,2,0,"span",8),t.qZA(),t.TgZ(13,"div",5)(14,"span",6),t._uU(15,"Categoria "),t.qZA(),t._UZ(16,"input",10),t.YNc(17,F,2,0,"span",8),t.qZA(),t.TgZ(18,"div",5)(19,"span",6),t._uU(20,"Localizacion "),t.qZA(),t._UZ(21,"input",11),t.qZA(),t.TgZ(22,"div",5)(23,"span",6),t._uU(24,"Telefono "),t.qZA(),t._UZ(25,"input",12),t.qZA()()),2&o){const r=t.oxw();t.xp6(7),t.Q6J("ngIf",r.fieldNotValid("nameCompany")),t.xp6(5),t.Q6J("ngIf",r.fieldNotValid("description")),t.xp6(5),t.Q6J("ngIf",r.fieldNotValid("category"))}}const A=function(o){return{disabled:o}},U=[{path:"",component:P,canActivate:[m.Cq],canLoad:[m.Cq],children:[{path:"files",loadChildren:()=>a.e(333).then(a.bind(a,5333)).then(o=>o.FilesModule)},{path:"products",loadChildren:()=>Promise.all([a.e(592),a.e(380)]).then(a.bind(a,1380)).then(o=>o.ProductsModule)},{path:"company",component:(()=>{class o{constructor(r,l,d){this.companyService=r,this.fb=l,this.router=d,this.faviconURL="",this.logoURL="",this.buttons=[{text:"Editar Encabezado",name:"header"},{text:"Editar Pie de pagina",name:"footer"},{text:"Editar CSS",name:"css"},{text:"Editar JS",name:"js"}],this.myForm=this.fb.group({nameCompany:["",[u.kI.required]],description:["",[u.kI.required]],category:["",[u.kI.required]],location:["",[]],phone:["",[]]})}ngOnInit(){this.companyService.getCompanyById(this.companyService.getCurrentIDCompany).subscribe(r=>{var l,d,f,C,x;r.ok&&(this.company=r.company,this.myForm.setValue({nameCompany:null!==(l=this.company.nameCompany)&&void 0!==l?l:"",description:null!==(d=this.company.description)&&void 0!==d?d:"",category:null!==(f=this.company.category)&&void 0!==f?f:"",location:null!==(C=this.company.location)&&void 0!==C?C:"",phone:null!==(x=this.company.phone)&&void 0!==x?x:""}))})}fieldNotValid(r){var l,d;return(null===(l=this.myForm.get(r))||void 0===l?void 0:l.invalid)&&(null===(d=this.myForm.get(r))||void 0===d?void 0:d.touched)}save(){this.myForm.valid?this.companyService.updateCompany(this.companyService.getCurrentIDCompany,this.myForm.value).subscribe(r=>{r.ok?b().fire({position:"center",icon:"success",title:"Cambios Exitosos",showConfirmButton:!0}).then(l=>{window.location.reload()}):b().fire({background:"rgba(250,250,250,0.96)",title:"Oops!! hubo un error",text:`${r.msg}`,icon:"error",confirmButtonColor:"#3085d6"})}):b().fire({background:"rgba(250,250,250,0.96)",title:"Oops!!",text:"Datos incorrectos",icon:"error",confirmButtonColor:"#3085d6"})}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(v.J),t.Y36(u.qu),t.Y36(h.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-company"]],decls:5,vars:5,consts:[[1,"m-5"],["autocomplete","off",1,"form-edit","mx-auto","text-center","py-5","bg-body","rounder",3,"formGroup","ngSubmit"],["class","row w-50 mx-auto mb-4",4,"ngIf"],["type","submit",1,"btn","btn-purple",3,"ngClass"],[1,"row","w-50","mx-auto","mb-4"],[1,"mb-3","col-md-12"],[1,"form-label"],["type","text","formControlName","nameCompany","id","nameCompany","aria-describedby","helpId","placeholder","",1,"form-control"],["class","form-label form-text text-danger",4,"ngIf"],["type","text","formControlName","description","id","description","placeholder","",1,"form-control","text-center"],["type","text","formControlName","category","id","category","placeholder","",1,"form-control"],["type","text","formControlName","location","id","location","placeholder","",1,"form-control"],["type","text","formControlName","phone","id","phone","placeholder","",1,"form-control"],[1,"form-label","form-text","text-danger"]],template:function(r,l){1&r&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return l.save()}),t.YNc(2,k,26,3,"div",2),t.TgZ(3,"button",3),t._uU(4,"Guardar Cambios"),t.qZA()()()),2&r&&(t.xp6(1),t.Q6J("formGroup",l.myForm),t.xp6(1),t.Q6J("ngIf",l.company),t.xp6(1),t.Q6J("ngClass",t.VKq(3,A,l.myForm.invalid)))},directives:[u._Y,u.JL,u.sg,p.O5,u.Fj,u.JJ,u.u,p.mk],styles:[".form-edit[_ngcontent-%COMP%]{width:700px}.form-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-edit[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-align:center}.btn-fa[_ngcontent-%COMP%]{display:contents;border:0px;width:100px;height:10px;font-size:5rem}"]}),o})()},{path:"web-config",loadChildren:()=>a.e(683).then(a.bind(a,3683)).then(o=>o.WebConfigModule)},{path:"",redirectTo:"company",pathMatch:"full"}]},{path:"pages",loadChildren:()=>Promise.all([a.e(232),a.e(592),a.e(337)]).then(a.bind(a,5337)).then(o=>o.PagesModule)}];let D=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.Bz.forChild(U)],h.Bz]}),o})();var W=a(5578),E=a(4586),w=a(1354);let B=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,D,W.q,u.UX,E.D,w.F]]}),o})()},6196:(I,y,a)=>{a.d(y,{J:()=>v});var p=a(520),h=a(8505),m=a(2340),t=a(5e3);let v=(()=>{class g{constructor(n){this.http=n,this.currentIDCompany="",this.currentCompany={},this.url=`${m.N.baseUrl}/companies`,this.urlFile=`${m.N.baseUrl}/files`,this.urlProducts=`${m.N.baseUrl}/products`}get getAllCompany(){return this.http.get(this.url)}get getAllCompanyWithWebAndPages(){return this.http.get(`${this.url}/with-webs`)}get getCurrentIDCompany(){return this.currentIDCompany}set setCurrentIDCompany(n){this.currentIDCompany=n}get getCompany(){return this.currentCompany}set setCurrentCompany(n){this.currentCompany=n}getCompanyById(n){return this.http.get(`${this.url}/${n}`)}inicializatedCurrentData(n){this.getCompanyById(n).pipe((0,h.b)(e=>{this.currentCompany=e.company}))}getCompanyByUser(n){return this.http.get(`${this.url}/user/${n}`)}changeStateCompany(n){const e=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.put(`${this.url}/${n._id}`,{state:!n.state},{headers:e})}updateCompany(n,e){const i=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.put(`${this.url}/${n}`,e,{headers:i})}deleteCompany(n){const e=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.delete(`${this.url}/${n._id}`,{headers:e})}getCompanyProducts(n){return this.http.get(`${this.urlProducts}/${n}`)}newFile(n,e){const i=new FormData,s=(new p.WM).append("x-token",localStorage.getItem("token")||"");return i.append("baseName",String(e.baseName)),i.append("file",e.file),i.append("description",e.description),this.http.post(`${this.urlFile}/${n}`,i,{headers:s})}getFiles(n){return this.http.get(`${this.urlFile}/${n}`)}getFile(n,e){return this.http.get(`${this.urlFile}/${n}/${e}`)}updateFile(n,e,i){const s=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.put(`${this.urlFile}/${n}/${e}`,i,{headers:s})}deleteFile(n,e){const i=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.delete(`${this.urlFile}/${n}/${e}`,{headers:i})}addProduct(n){const e=new FormData,i=(new p.WM).append("x-token",localStorage.getItem("token")||"");return e.append("name",n.name),e.append("price",n.price),e.append("description",n.description),e.append("categories",n.categories),e.append("image",n.image),this.http.post(`${this.urlProducts}/${this.currentIDCompany}`,e,{headers:i})}deleteProduct(n){const e=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.delete(`${this.urlProducts}/${n}`,{headers:e})}updateProduct(n,e){const i=new FormData,s=(new p.WM).append("x-token",localStorage.getItem("token")||"");return e.name&&i.append("name",e.name),e.price&&i.append("price",e.price),e.description&&i.append("description",e.description),e.categories&&i.append("categories",e.categories),e.image&&i.append("image",e.image),this.http.put(`${this.urlProducts}/${this.getCurrentIDCompany}/${n}`,i,{headers:s})}getProductById(n){return this.http.get(`${this.urlProducts}/${this.getCurrentIDCompany}/${n}`)}getWeb(n){return this.http.get(`${this.url}/${n}/web`)}getWebWithPages(n){return this.http.get(`${this.url}/${n}/web-pages`)}updateMainPage(n,e){const i=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.put(`${this.url}/${n}/web`,{pageMain:e},{headers:i})}updateWeb(n,e){const i=(new p.WM).append("x-token",localStorage.getItem("token")||""),s=new FormData;return e.title&&s.append("title",e.title),e.keywords&&s.append("keywords",e.keywords),e.description&&s.append("description",e.description),e.cssExtra&&s.append("cssExtra",e.cssExtra),e.jsExtra&&s.append("jsExtra",e.jsExtra),e.genericHeaderHTML&&s.append("genericHeaderHTML",e.genericHeaderHTML),e.genericFooterHTML&&s.append("genericFooterHTML",e.genericFooterHTML),e.logo&&s.append("logo",e.logo),e.favicon&&s.append("favicon",e.favicon),this.http.put(`${this.url}/${n}/web`,s,{headers:i})}getPages(n){return this.http.get(`${this.url}/${n}/web/pages`)}getPage(n,e){return this.http.get(`${this.url}/${n}/web/pages/${e}`)}newPage(n,e){const i=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.post(`${this.url}/${n}/web/pages`,e,{headers:i})}deletePage(n,e){const i=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.delete(`${this.url}/${n}/web/pages/${e}`,{headers:i})}updatePage(n,e,i){const s=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.put(`${this.url}/${n}/web/pages/${e}`,i,{headers:s})}getBlocks(n,e){return this.http.get(`${this.url}/${n}/web/pages/${e}/blocks`)}getBlock(n,e,i){return this.http.get(`${this.url}/${n}/web/pages/${e}/blocks/${i}`)}newBlock(n,e,i){const s=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.post(`${this.url}/${n}/web/pages/${e}/blocks`,i,{headers:s})}updateBlock(n,e,i){const s=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.put(`${this.url}/${n}/web/pages/${e}/blocks/${i._id}`,i,{headers:s})}updateBlockWithID(n,e,i,s){const M=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.put(`${this.url}/${n}/web/pages/${e}/blocks/${i}`,s,{headers:M})}deleteBlock(n,e,i){const s=(new p.WM).append("x-token",localStorage.getItem("token")||"");return this.http.delete(`${this.url}/${n}/web/pages/${e}/blocks/${i}`,{headers:s})}}return g.\u0275fac=function(n){return new(n||g)(t.LFG(p.eN))},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},4586:(I,y,a)=>{a.d(y,{D:()=>h});var p=a(5e3);let h=(()=>{class m{}return m.\u0275fac=function(v){return new(v||m)},m.\u0275mod=p.oAB({type:m}),m.\u0275inj=p.cJS({}),m})()}}]);