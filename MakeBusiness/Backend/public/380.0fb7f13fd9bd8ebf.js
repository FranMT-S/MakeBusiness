"use strict";(self.webpackChunkFronted=self.webpackChunkFronted||[]).push([[380],{1380:(et,Z,d)=>{d.r(Z),d.d(Z,{ProductsModule:()=>tt});var h=d(9808),l=d(1083),a=d(3075),v=d(2340),x=d(5226),m=d.n(x),t=d(5e3),y=d(9103),C=d(6196);function T(e,r){1&e&&(t.TgZ(0,"span",18),t._uU(1,"El campo no es valido "),t.qZA())}function A(e,r){1&e&&(t.TgZ(0,"span",18),t._uU(1,"El campo no es valido "),t.qZA())}function U(e,r){1&e&&(t.TgZ(0,"span",18),t._uU(1,"El campo no es valido "),t.qZA())}function I(e,r){1&e&&(t.TgZ(0,"span",18),t._uU(1,"El campo no es valido "),t.qZA())}const N=function(){return["../"]},J=function(e){return{disabled:e}};let w=(()=>{class e{constructor(o,n,i){this.fb=o,this.validatorService=n,this.companyService=i,this.imageUrl=`${v.N.baseUrl}/uploads/other/img-default.png`,this.myForm=this.fb.group({name:["",[a.kI.required]],description:["",[a.kI.required]],price:["",[a.kI.required,this.validatorService.isNumber]],category:["",[a.kI.required]],image:["",[a.kI.required]]})}ngOnInit(){}fieldNotValid(o){var n,i;return(null===(n=this.myForm.get(o))||void 0===n?void 0:n.invalid)&&(null===(i=this.myForm.get(o))||void 0===i?void 0:i.touched)}changeImage(o){var n,i,c;if(this.uploadImage=null===(n=null==o?void 0:o.target)||void 0===n?void 0:n.files[0],!this.uploadImage)return void(null===(i=this.myForm.get("image"))||void 0===i||i.markAsPristine());if(!["image/png","image/jpeg","image/jpg"].includes(this.uploadImage.type))return null===(c=this.myForm.get("image"))||void 0===c||c.markAsPristine(),void m().fire({background:"rgba(250,250,250,0.96)",title:"Oops!! hubo un error",text:"Tipo de archivo no valido",icon:"error",confirmButtonColor:"#3085d6"});const s=new FileReader;s.readAsDataURL(this.uploadImage),s.onload=_=>{var f,b;this.imageUrl=null===(b=null===(f=_.target)||void 0===f?void 0:f.result)||void 0===b?void 0:b.toString()}}save(){if(this.myForm.valid){const{name:o,description:n,price:i,category:c}=this.myForm.value;this.companyService.addProduct({name:o,description:n,price:i,categories:c,image:this.uploadImage}).subscribe(s=>{console.log(s),s.ok?m().fire({position:"center",icon:"success",title:"Agregado con exito",showConfirmButton:!0}).then(()=>{this.myForm.reset(),this.imageUrl=`${v.N.baseUrl}/uploads/other/img-default.png`}):(m().fire({background:"rgba(250,250,250,0.96)",title:"Oops!! hubo un error",text:`${s.msg}`,icon:"error",confirmButtonColor:"#3085d6"}),console.log(s.error))})}else m().fire({background:"rgba(250,250,250,0.96)",title:"Oops!! hubo un error",text:"Ingrese los datos correctos",icon:"error",confirmButtonColor:"#3085d6"})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(a.qu),t.Y36(y.o),t.Y36(C.J))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-product"]],decls:36,vars:11,consts:[[1,"m-5"],[1,"text-center"],["aria-hidden","true",1,"backPage","fa","fa-circle-arrow-left",3,"routerLink"],["autocomplete","off",1,"form","mx-auto","text-center","py-5","bg-body","rounder",3,"formGroup","ngSubmit"],[1,"row","w-50","mx-auto","mb-4"],[1,"mb-3","col-md-12"],[1,"form-label"],["type","text","formControlName","name","id","name","aria-describedby","helpId","placeholder","",1,"form-control"],["class","form-label form-text text-danger",4,"ngIf"],["type","text","formControlName","description","id","description","placeholder","",1,"form-control","text-center"],["type","text","formControlName","price","id","price","placeholder","",1,"form-control"],["type","text","formControlName","category","id","category","placeholder","",1,"form-control"],[1,"row","pt-3","justify-content-center","mx-auto"],[1,"col-3"],["name","image","id","image",2,"height","120px",3,"src"],[1,"mt-3","col-md-12"],["formControlName","image","accept","image/png, image/jpeg, image/jpg","type","file","id","formFile",1,"form-control",3,"change"],["type","submit",1,"btn","btn-purple",3,"ngClass"],[1,"form-label","form-text","text-danger"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2," Agregar Producto"),t.qZA(),t._UZ(3,"i",2),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return n.save()}),t.TgZ(5,"div",4)(6,"div",5)(7,"span",6),t._uU(8,"Nombre "),t.qZA(),t._UZ(9,"input",7),t.YNc(10,T,2,0,"span",8),t.qZA(),t.TgZ(11,"div",5)(12,"span",6),t._uU(13,"Descripcion "),t.qZA(),t._UZ(14,"textarea",9),t.YNc(15,A,2,0,"span",8),t.qZA(),t.TgZ(16,"div",5)(17,"span",6),t._uU(18,"Precio "),t.qZA(),t._UZ(19,"input",10),t.YNc(20,U,2,0,"span",8),t.qZA(),t.TgZ(21,"div",5)(22,"span",6),t._uU(23,"Categoria "),t.qZA(),t._UZ(24,"input",11),t.YNc(25,I,2,0,"span",8),t.qZA(),t.TgZ(26,"div",5)(27,"span",6),t._uU(28,"Imagen "),t.qZA(),t.TgZ(29,"div",12)(30,"div",13),t._UZ(31,"img",14),t.qZA(),t.TgZ(32,"div",15)(33,"input",16),t.NdJ("change",function(c){return n.changeImage(c)}),t.qZA()()()()(),t.TgZ(34,"button",17),t._uU(35,"Guardar Cambios"),t.qZA()()()),2&o&&(t.xp6(3),t.Q6J("routerLink",t.DdM(8,N)),t.xp6(1),t.Q6J("formGroup",n.myForm),t.xp6(6),t.Q6J("ngIf",n.fieldNotValid("name")),t.xp6(5),t.Q6J("ngIf",n.fieldNotValid("description")),t.xp6(5),t.Q6J("ngIf",n.fieldNotValid("price")),t.xp6(5),t.Q6J("ngIf",n.fieldNotValid("category")),t.xp6(6),t.Q6J("src",n.imageUrl,t.LSH),t.xp6(3),t.Q6J("ngClass",t.VKq(9,J,n.myForm.invalid)))},directives:[l.rH,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,h.O5,h.mk],styles:[".form[_ngcontent-%COMP%]{width:700px}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-align:center}.btn-fa[_ngcontent-%COMP%]{display:contents;border:0px;width:100px;height:10px;font-size:5rem}.file-upload[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-size:1.25em;font-weight:700;color:#fff;background-color:#000;display:inline-block}.file-upload[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .file-upload[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover{background-color:red}"]}),e})();function q(e,r){1&e&&(t.TgZ(0,"span",18),t._uU(1,"El campo no es valido "),t.qZA())}function F(e,r){1&e&&(t.TgZ(0,"span",18),t._uU(1,"El campo no es valido "),t.qZA())}function k(e,r){1&e&&(t.TgZ(0,"span",18),t._uU(1,"El campo no es valido "),t.qZA())}function S(e,r){1&e&&(t.TgZ(0,"span",18),t._uU(1,"El campo no es valido "),t.qZA())}const O=function(){return["../../"]},M=function(e){return{disabled:e}};let Q=(()=>{class e{constructor(o,n,i,c,p){this.activatedRoute=o,this.companyService=n,this.router=i,this.fb=c,this.validatorService=p,this.product={},this.imageUrl=`${v.N.baseUrl}/uploads/other/img-default.png`,this.idProduct="",this.myForm=this.fb.group({name:["",[a.kI.required]],description:["",[a.kI.required]],price:["",[a.kI.required,this.validatorService.isNumber]],categories:["",[a.kI.required]]}),this.activatedRoute.params.subscribe(s=>{this.idProduct=s.id,this.companyService.getProductById(this.idProduct).subscribe(g=>{g.ok&&(this.product=g.product,this.imageUrl=`${v.N.baseUrl}/uploads/products/${g.product.image}`,this.myForm.setValue({name:this.product.name,description:this.product.description,price:this.product.price,categories:this.product.categories}))})})}ngOnInit(){}fieldNotValid(o){var n,i;return(null===(n=this.myForm.get(o))||void 0===n?void 0:n.invalid)&&(null===(i=this.myForm.get(o))||void 0===i?void 0:i.touched)}changeImage(o){var n,i,c;if(this.uploadImage=null===(n=null==o?void 0:o.target)||void 0===n?void 0:n.files[0],!this.uploadImage)return void(null===(i=this.myForm.get("image"))||void 0===i||i.markAsPristine());if(!["image/png","image/jpeg","image/jpg"].includes(this.uploadImage.type))return null===(c=this.myForm.get("image"))||void 0===c||c.markAsPristine(),void m().fire({background:"rgba(250,250,250,0.96)",title:"Oops!! hubo un error",text:"Tipo de archivo no valido",icon:"error",confirmButtonColor:"#3085d6"});const s=new FileReader;s.readAsDataURL(this.uploadImage),s.onload=g=>{var _,f;this.imageUrl=null===(f=null===(_=g.target)||void 0===_?void 0:_.result)||void 0===f?void 0:f.toString()}}save(){if(this.myForm.valid){const{name:o,description:n,price:i,categories:c}=this.myForm.value;this.companyService.updateProduct(this.idProduct,{name:o,description:n,price:i,categories:c,image:this.uploadImage}).subscribe(g=>{g.ok?m().fire({position:"center",icon:"success",title:"Cambios Exitosos",showConfirmButton:!0}).then(()=>{this.router.navigateByUrl(`admin-companies/${localStorage.getItem("_web")}/products/list`)}):(m().fire({background:"rgba(250,250,250,0.96)",title:"Oops!! hubo un error",text:`${g.msg}`,icon:"error",confirmButtonColor:"#3085d6"}),console.log(g.error))})}else console.log(this.myForm.valid),console.log(this.myForm.value),m().fire({background:"rgba(250,250,250,0.96)",title:"Oops!! hubo un error",text:"Ingrese los datos correctos",icon:"error",confirmButtonColor:"#3085d6"})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.gz),t.Y36(C.J),t.Y36(l.F0),t.Y36(a.qu),t.Y36(y.o))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-edit-product"]],decls:36,vars:15,consts:[[1,"m-5"],[1,"text-center"],["aria-hidden","true",1,"backPage","fa","fa-circle-arrow-left",3,"routerLink"],["autocomplete","off",1,"form","mx-auto","text-center","py-5","bg-body","rounder",3,"formGroup","ngSubmit"],[1,"row","w-50","mx-auto","mb-4"],[1,"mb-3","col-md-12"],[1,"form-label"],["type","text","formControlName","name","id","name","aria-describedby","helpId","placeholder","",1,"form-control",3,"value"],["class","form-label form-text text-danger",4,"ngIf"],["type","text","formControlName","description","id","description","placeholder","",1,"form-control","text-center",3,"value"],["type","text","formControlName","price","id","price","placeholder","",1,"form-control",3,"value"],["type","text","formControlName","categories","id","categories","placeholder","",1,"form-control",3,"value"],[1,"row","pt-3","justify-content-center","mx-auto"],[1,"col-3"],["name","image","id","image",2,"height","80px",3,"src"],[1,"mt-3","col-md-12"],["accept","image/png, image/jpeg, image/jpg","type","file","id","formFile",1,"form-control",3,"change"],["type","submit",1,"btn","btn-purple",3,"ngClass"],[1,"form-label","form-text","text-danger"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2," Editar Producto"),t.qZA(),t._UZ(3,"i",2),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return n.save()}),t.TgZ(5,"div",4)(6,"div",5)(7,"span",6),t._uU(8,"Nombre "),t.qZA(),t._UZ(9,"input",7),t.YNc(10,q,2,0,"span",8),t.qZA(),t.TgZ(11,"div",5)(12,"span",6),t._uU(13,"Descripcion "),t.qZA(),t._UZ(14,"textarea",9),t.YNc(15,F,2,0,"span",8),t.qZA(),t.TgZ(16,"div",5)(17,"span",6),t._uU(18,"Precio "),t.qZA(),t._UZ(19,"input",10),t.YNc(20,k,2,0,"span",8),t.qZA(),t.TgZ(21,"div",5)(22,"span",6),t._uU(23,"Categoria "),t.qZA(),t._UZ(24,"input",11),t.YNc(25,S,2,0,"span",8),t.qZA(),t.TgZ(26,"div",5)(27,"span",6),t._uU(28,"Imagen "),t.qZA(),t.TgZ(29,"div",12)(30,"div",13),t._UZ(31,"img",14),t.qZA(),t.TgZ(32,"div",15)(33,"input",16),t.NdJ("change",function(c){return n.changeImage(c)}),t.qZA()()()()(),t.TgZ(34,"button",17),t._uU(35,"Guardar Cambios"),t.qZA()()()),2&o&&(t.xp6(3),t.Q6J("routerLink",t.DdM(12,O)),t.xp6(1),t.Q6J("formGroup",n.myForm),t.xp6(5),t.Q6J("value",n.product.name),t.xp6(1),t.Q6J("ngIf",n.fieldNotValid("name")),t.xp6(4),t.Q6J("value",n.product.description),t.xp6(1),t.Q6J("ngIf",n.fieldNotValid("description")),t.xp6(4),t.Q6J("value",n.product.price),t.xp6(1),t.Q6J("ngIf",n.fieldNotValid("price")),t.xp6(4),t.Q6J("value",n.product.categories),t.xp6(1),t.Q6J("ngIf",n.fieldNotValid("categories")),t.xp6(6),t.Q6J("src",n.imageUrl,t.LSH),t.xp6(3),t.Q6J("ngClass",t.VKq(13,M,n.myForm.invalid)))},directives:[l.rH,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,h.O5,h.mk],styles:[".form[_ngcontent-%COMP%]{width:700px}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-align:center}.btn-fa[_ngcontent-%COMP%]{display:contents;border:0px;width:100px;height:10px;font-size:5rem}"]}),e})();var P=d(7850),u=d(8279),L=d(4834),Y=d(4638);function R(e,r){if(1&e&&(t.TgZ(0,"th",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,o)," ")}}function B(e,r){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const o=r.$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ",o[n]," ")}}function D(e,r){1&e&&(t.ynx(0,21),t.YNc(1,R,3,3,"th",16),t.YNc(2,B,2,1,"td",17),t.BQk()),2&e&&t.Q6J("matColumnDef",r.$implicit)}function E(e,r){1&e&&(t.TgZ(0,"th",22),t._uU(1," Imagen "),t.qZA())}function j(e,r){if(1&e&&(t.TgZ(0,"td",23),t._UZ(1,"img",24),t.qZA()),2&e){const o=r.$implicit,n=t.oxw();t.xp6(1),t.Q6J("src",n.productURLBase+o.image,t.LSH)}}function $(e,r){1&e&&t._UZ(0,"tr",25)}function V(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"tr",26),t.NdJ("click",function(){const c=t.CHM(o).$implicit;return t.oxw().selectRow(c)}),t.qZA()}if(2&e){const o=r.$implicit,n=t.oxw();t.ekj("highlight",n.selectedRowIndex==o._id)}}const z=function(){return["../add-product"]},H=function(){return[5,10,20]},G=[{path:"",component:(()=>{class e{constructor(o,n){this.companyService=o,this.activatedRoute=n}ngAfterContentInit(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(C.J),t.Y36(l.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-products"]],decls:1,vars:0,template:function(o,n){1&o&&t._UZ(0,"router-outlet")},directives:[l.lC],styles:[""]}),e})(),children:[{path:"list",component:(()=>{class e{constructor(o,n,i){this.router=o,this.companyService=n,this.activatedRoute=i,this.selectedRowIndex="",this.selectedProduct={},this.productURLBase=`${v.N.baseUrl}/uploads/products/`,this.displayedColumns=["id","name","price","description","categories","image"],this.products=[],this.dataSource=new u.by}ngAfterViewInit(){this.getProducts()}ngOnInit(){}getProducts(){this.companyService.getCompanyProducts(this.companyService.getCurrentIDCompany).subscribe(o=>{o.ok&&(this.products=o.products,this.dataSource.data=this.products,this.dataSource.paginator=this.paginator)})}selectRow(o){this.selectedProduct=o,this.selectedRowIndex=o._id}editProduct(){this.router.navigateByUrl(`/admin-companies/${this.companyService.getCurrentIDCompany}/products/${this.selectedRowIndex}/edit-product`)}deleteProduct(){let o=this.selectedRowIndex;m().fire({text:"\xbfDesea eliminar esta producto?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then(n=>{n.isConfirmed&&this.companyService.deleteProduct(o).subscribe(i=>{i.ok?this.getProducts():(m().fire({background:"rgba(250,250,250,0.96)",title:"Oops!! hubo un error",text:"no se pudo eliminar",icon:"error",confirmButtonColor:"#3085d6"}),console.log(i.error))})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.F0),t.Y36(C.J),t.Y36(l.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-products"]],viewQuery:function(o,n){if(1&o&&t.Gf(P.NW,5),2&o){let i;t.iGM(i=t.CRH())&&(n.paginator=i.first)}},decls:22,vars:10,consts:[[1,"m-5"],[1,"text-center"],[1,"bg-light","rounded"],[1,"mb-5"],[1,"d-flex","justify-content-center","mb-3"],[1,"buttonsContainer","text-deg-purple-1"],[3,"routerLink"],[1,"fa","fa-light","fa-circle-plus"],[3,"disabled","click"],["aria-hidden","true",1,"fa","fa-solid","fa-pen-to-square"],[3,"disabled"],["aria-hidden","true",1,"fa","fa-trash",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8","w-100",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"highlight","click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of company elements",3,"pageSizeOptions"],[3,"matColumnDef"],["mat-header-cell",""],["mat-cell",""],["alt","",2,"height","120px","width","120px",3,"src"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2," Productos"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"mat-divider",3),t.TgZ(5,"div",4)(6,"span",5)(7,"button",6),t._UZ(8,"i",7),t.qZA(),t.TgZ(9,"button",8),t.NdJ("click",function(){return n.editProduct()}),t._UZ(10,"i",9),t.qZA(),t.TgZ(11,"button",10)(12,"i",11),t.NdJ("click",function(){return n.deleteProduct()}),t.qZA()()()()(),t.TgZ(13,"div",12)(14,"table",13),t.YNc(15,D,3,1,"ng-container",14),t.ynx(16,15),t.YNc(17,E,2,0,"th",16),t.YNc(18,j,2,1,"td",17),t.BQk(),t.YNc(19,$,1,0,"tr",18),t.YNc(20,V,1,2,"tr",19),t.qZA(),t._UZ(21,"mat-paginator",20),t.qZA()()),2&o&&(t.xp6(7),t.Q6J("routerLink",t.DdM(8,z)),t.xp6(2),t.Q6J("disabled",""==n.selectedRowIndex),t.xp6(2),t.Q6J("disabled",""==n.selectedRowIndex),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("ngForOf",n.displayedColumns.slice(0,-1)),t.xp6(4),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(9,H)))},directives:[L.d,l.rH,u.BZ,h.sg,u.w1,u.fO,u.ge,u.Dz,u.ev,u.as,u.XQ,u.nj,u.Gk,P.NW],pipes:[Y.X],styles:[""]}),e})(),pathMatch:"full"},{path:"add-product",component:w,pathMatch:"full"},{path:":id/edit-product",component:Q,pathMatch:"full"},{path:"",redirectTo:"list",pathMatch:"full"}]}];let X=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.Bz.forChild(G)],l.Bz]}),e})();var K=d(5578),W=d(4586);let tt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[h.ez,X,K.q,W.D,a.UX]]}),e})()}}]);